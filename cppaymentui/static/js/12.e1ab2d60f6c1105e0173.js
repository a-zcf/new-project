webpackJsonp([12],{"3zKz":function(n,t,a){(n.exports=a("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"addactivity.vue",sourceRoot:""}])},FbYw:function(n,t,a){var e=a("3zKz");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("0efc91c9",e,!1,{})},a3ZV:function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("P9l9"),i={name:"addactivity",data:function(){return{text:"提交",activityName:"",radio:"1",integral:"",show:!1,show1:!1,result:[],list:[],dataList:[],radioVal:"",cardName:""}},mounted:function(){var n=this,t=location.href.split("#")[0];n.$getRequest(e.shopCardList,{url:t}).then(function(t){0===t.data.code&&(n.dataList=t.data.data)}),n.$postRequest(e.customerList,{pageNo:1,pageSize:100}).then(function(t){0===t.data.code&&(n.list=t.data.data.list)})},methods:{clickGive:function(){this.show=!0},clickCoupon:function(){this.show1=!0},clickDelete:function(n){this.result.splice(n,1)},getRadioVal:function(n){this.cardName=n,""==n&&null==n||(this.show1=!1)},clickAddShopActivity:function(){var n=this;if(""==n.activityName||null==n.activityName)return n.$toast("标题不能为空！"),!1;if(1==n.radio&&""==n.integral||1==n.radio&&null==n.integral)return n.$toast("积分数量不能为空！"),!1;if(2==n.radio&&""==n.radioVal||2==n.radio&&null==n.radioVal)return n.$toast("请选择赠送卡券！"),!1;if(0==n.result.length)return n.$toast("请选择赠送对象"),!1;var t={title:n.activityName,cardId:n.radioVal,userList:n.result,activityType:n.radio,giveScore:n.integral};n.$postRequest(e.addShopActivity,t).then(function(t){0===t.data.code?(n.activityName="",n.result=[],n.integral="",n.$toast.success("添加成功"),n.$router.go(-1)):n.$toast.fail(t.data.msg)})}}},s=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"add-activity"},[a("back"),n._v(" "),a("div",{staticClass:"add-contert"},[a("div",{staticClass:"act-name"},[a("table",[n._v("\n        活动名称：\n      ")]),n._v(" "),a("van-field",{attrs:{placeholder:"请输入活动名称",clearable:""},model:{value:n.activityName,callback:function(t){n.activityName=t},expression:"activityName"}})],1),n._v(" "),a("div",{staticClass:"act-type"},[a("table",[n._v("\n        活动类型：\n      ")]),n._v(" "),a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:n.radio,callback:function(t){n.radio=t},expression:"radio"}},[a("van-radio",{attrs:{name:"1"}},[n._v("送积分")]),n._v(" "),a("van-radio",{attrs:{name:"2"}},[n._v("送优惠券")])],1)],1),n._v(" "),1==n.radio?a("van-field",{staticClass:"integral",attrs:{type:"digit",label:"积分数量：",placeholder:"请输入赠送积分数量",clearable:""},model:{value:n.integral,callback:function(t){n.integral=t},expression:"integral"}}):n._e(),n._v(" "),2==n.radio?a("div",{staticClass:"cell"},[a("van-cell",{attrs:{title:"赠送卡券：","is-link":"",value:n.cardName},on:{click:n.clickCoupon}})],1):n._e(),n._v(" "),a("div",{staticClass:"cell"},[a("van-cell",{attrs:{title:"赠送对象：","is-link":"",value:"选择人员"},on:{click:n.clickGive}})],1)],1),n._v(" "),a("div",{staticClass:"give-object"},[a("ul",n._l(n.result,function(t,e){return a("li",{key:e},[a("span",{staticClass:"name"},[n._v(n._s(t.nickname))]),n._v(" "),a("span",{staticClass:"iconfont icon-guanbi1 guanbi",on:{click:function(t){return n.clickDelete(e)}}})])}),0)]),n._v(" "),a("van-popup",{staticClass:"popup-list",attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:n.show,callback:function(t){n.show=t},expression:"show"}},[a("ul",n._l(n.list,function(t,e){return a("li",{key:e},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.result,expression:"result"}],attrs:{type:"checkbox",id:"listInput"},domProps:{value:t,checked:Array.isArray(n.result)?n._i(n.result,t)>-1:n.result},on:{change:function(a){var e=n.result,i=a.target,s=!!i.checked;if(Array.isArray(e)){var l=t,c=n._i(e,l);i.checked?c<0&&(n.result=e.concat([l])):c>-1&&(n.result=e.slice(0,c).concat(e.slice(c+1)))}else n.result=s}}}),n._v(" "),a("span",[n._v(n._s(t.nickname))])])}),0)]),n._v(" "),a("van-popup",{staticClass:"popup-list",attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:n.show1,callback:function(t){n.show1=t},expression:"show1"}},n._l(n.dataList,function(t){return a("label",{key:t.id,staticClass:"label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.radioVal,expression:"radioVal"}],attrs:{type:"radio"},domProps:{value:t.cardId,checked:n._q(n.radioVal,t.cardId)},on:{change:[function(a){n.radioVal=t.cardId},function(a){return n.getRadioVal(t.cardName)}]}}),n._v(n._s(t.cardName))])}),0),n._v(" "),a("acticity-but",{directives:[{name:"click",rawName:"v-click.native",value:n.clickAddShopActivity,expression:"clickAddShopActivity",modifiers:{native:!0}}],attrs:{text:n.text}})],1)};s._withStripped=!0;var l={render:s,staticRenderFns:[]},c=l;var o=!1;var r=a("VU/8")(i,c,!1,function(n){o||a("FbYw")},null,null);r.options.__file="src/views/activityadmin/addactivity.vue";t.default=r.exports}});
//# sourceMappingURL=12.e1ab2d60f6c1105e0173.js.map